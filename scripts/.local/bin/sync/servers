#!/usr/bin/env python

from subprocess import run
from pathlib import Path


def main():
    servers = ["ubuntu@toronto-server.follow-mohs.ts.net"]

    backupDir = Path.home() / "Backups"

    try:
        for server in servers:
            print(f"Syncing {server}")
            run(f"rsync -azrq --partial --exclude '.*' --delete --ignore-errors {server}:/home/ubuntu {backupDir}/{server}",
                shell=True,
                check=True,
                )
    except Exception:
        print(f"An error occured when backing up {server}")


if __name__ == "__main__":
    main()
