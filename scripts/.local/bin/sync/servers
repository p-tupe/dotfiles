#!/usr/bin/env python

from subprocess import run
from pathlib import Path


def main():
    servers = ["toronto-server", "badass-server"]

    backupDir = Path.home() / "Backups"

    try:
        server = servers[0]
        print(f"Syncing {server}")
        run(f"rsync -azrq --partial \
                --exclude '.*' --delete --ignore-errors \
                {server}:/home/ubuntu {backupDir}/{server}",
            shell=True,
            check=True,
            )
    except Exception:
        print(f"An error occured when backing up {server}")

    try:
        server = servers[1]
        print(f"Syncing {server}")
        run(f"rsync -azrq --partial \
                --exclude '.*' --delete --ignore-errors \
                {server}:/home/ubuntu {backupDir}/{server}",
            shell=True,
            check=True,
            )
    except Exception:
        print(f"An error occured when backing up {server}")


if __name__ == "__main__":
    main()
